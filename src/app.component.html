<main class="min-h-screen bg-gradient-to-br from-gray-900 to-slate-800 text-gray-100 p-4 sm:p-6 lg:p-8">
  <div class="max-w-screen-2xl mx-auto">
    <!-- Header -->
    <header class="text-center mb-6">
      <div class="flex justify-center items-center space-x-3">
        <h1 class="text-4xl font-extrabold tracking-tight text-white sm:text-5xl">
          TourSafe
        </h1>
        <div class="flex items-center space-x-2">
          <span class="relative flex h-3 w-3">
            <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-red-500 opacity-75"></span>
            <span class="relative inline-flex rounded-full h-3 w-3 bg-red-600"></span>
          </span>
          <span class="text-red-400 font-semibold tracking-widest text-sm">LIVE</span>
        </div>
      </div>
      <p class="mt-2 text-lg text-gray-400">
        Simulating critical tourist events from detection to resolution.
      </p>
    </header>

    <!-- Scenario & Phase Controls -->
    <div class="flex flex-col sm:flex-row justify-center items-center space-y-4 sm:space-y-0 sm:space-x-6 mb-8">
      <!-- Scenario Switcher -->
       <div class="flex flex-wrap justify-center space-x-2 bg-gray-800 p-1 rounded-lg shadow-md">
          <button 
            (click)="setScenario('mountain_rescue')"
            [class]="currentScenario() === 'mountain_rescue' ? 'bg-blue-600 text-white shadow-lg' : 'bg-gray-700 text-gray-300 hover:bg-gray-600'"
            class="px-4 py-2 text-sm font-semibold rounded-md transition-all duration-200 flex items-center space-x-2">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.707 5.293a1 1 0 011.414 0l5 5a1 1 0 01-1.414 1.414L10 7.414l-4.293 4.293a1 1 0 01-1.414-1.414l5-5z" /></svg>
            <span>Rescue Dashboard</span>
          </button>
          <button 
            (click)="setScenario('urban_incident')"
            [class]="currentScenario() === 'urban_incident' ? 'bg-orange-600 text-white shadow-lg' : 'bg-gray-700 text-gray-300 hover:bg-gray-600'"
            class="px-4 py-2 text-sm font-semibold rounded-md transition-all duration-200 flex items-center space-x-2">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v1H5V4zM5 7h10v9a2 2 0 01-2 2H7a2 2 0 01-2-2V7z" /></svg>
            <span>Urban Incident (Theft)</span>
          </button>
          <button 
            (click)="setScenario('harassment_report')"
            [class]="currentScenario() === 'harassment_report' ? 'bg-red-600 text-white shadow-lg' : 'bg-gray-700 text-gray-300 hover:bg-gray-600'"
            class="px-4 py-2 text-sm font-semibold rounded-md transition-all duration-200 flex items-center space-x-2">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd" /></svg>
            <span>Harassment Report</span>
          </button>
       </div>
    </div>
    
    <div class="flex flex-col sm:flex-row justify-center items-center space-y-3 sm:space-y-0 sm:space-x-4 mb-8">
      <div class="flex space-x-2 bg-gray-800 p-1 rounded-lg shadow-md">
        @for (phase of simulationPhases(); track $index) {
          <button 
            (click)="goToPhase($index)"
            [class]="currentPhaseIndex() === $index ? 'bg-blue-600 text-white shadow-lg' : 'bg-gray-700 text-gray-300 hover:bg-gray-600'"
            class="px-4 py-2 text-sm font-semibold rounded-md transition-all duration-200">
            Phase {{ $index + 1 }}
          </button>
        }
      </div>
      <button (click)="nextPhase()" class="px-6 py-2 bg-indigo-600 text-white font-semibold rounded-lg shadow-md hover:bg-indigo-500 active:bg-indigo-700 transform active:scale-95 transition-all duration-200 flex items-center space-x-2">
        <span>Next Phase</span>
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
          <path fill-rule="evenodd" d="M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z" clip-rule="evenodd" />
        </svg>
      </button>
    </div>

    <!-- Phase Title -->
    <div class="text-center mb-8">
      <h2 class="text-2xl font-bold text-blue-400">{{ currentPhase().name }}</h2>
      <p class="text-gray-400 mt-1">{{ currentPhase().event }}</p>
    </div>

    <!-- Main Content Grid -->
    <div class="grid grid-cols-1 xl:grid-cols-3 gap-8">
      <!-- Mobile App Column -->
      <div class="xl:col-span-1 flex justify-center items-start">
        <app-mobile-app [data]="mobileAppData()"></app-mobile-app>
      </div>

      <!-- Dashboard & AI Summary Column -->
      <div class="xl:col-span-2 flex flex-col space-y-8">
        <app-dashboard [phase]="currentPhase()" [scenario]="simulationScenario()"></app-dashboard>

        <!-- AI Summary -->
        <div class="bg-gray-800 border border-gray-700 rounded-lg p-6 shadow-xl">
           <div class="flex items-center mb-3">
             <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-indigo-400 mr-3" viewBox="0 0 20 20" fill="currentColor">
               <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z" />
             </svg>
             <h3 class="text-xl font-bold text-white">Gemini AI Analysis & Recommendation</h3>
           </div>
           @if (isLoadingAiSummary()) {
             <div class="flex items-center space-x-3">
                <div class="animate-spin rounded-full h-5 w-5 border-b-2 border-blue-400"></div>
                <p class="text-gray-400">Generating real-time analysis...</p>
             </div>
           } @else {
             <p class="text-gray-300 leading-relaxed">{{ aiSummary() }}</p>
           }
        </div>
      </div>
    </div>

    <footer class="mt-12 pt-8 border-t border-gray-700 text-center text-gray-500">
      <div class="max-w-screen-lg mx-auto grid grid-cols-1 md:grid-cols-3 gap-8">
        <div class="text-left">
          <h4 class="font-semibold text-gray-300">About TourSafe</h4>
          <p class="text-sm mt-2">An intelligent, technology-driven solution for tourist safety, integrating AI, Geo-Fencing, and Blockchain Digital ID.</p>
        </div>
        <div class="text-left">
          <h4 class="font-semibold text-gray-300">UN SDG Alignment</h4>
          <p class="text-sm mt-2">Proudly supporting SDG 8 (Decent Work & Economic Growth), SDG 11 (Sustainable Cities & Communities), and SDG 16 (Peace, Justice & Strong Institutions).</p>
        </div>
        <div class="text-left">
          <h4 class="font-semibold text-gray-300">Resources</h4>
          <ul class="text-sm mt-2 space-y-1">
            <li><a href="#" class="hover:text-blue-400 transition-colors">Privacy Policy</a></li>
            <li><a href="#" class="hover:text-blue-400 transition-colors">Contact Support</a></li>
            <li><a href="#" class="hover:text-blue-400 transition-colors">Terms of Service</a></li>
          </ul>
        </div>
      </div>
      <p class="mt-8 text-xs">&copy; 2024 TourSafe. All Rights Reserved. This is a simulated interface for demonstration purposes.</p>
    </footer>

  </div>
</main>